<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - Scan and Know</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: Arial, sans-serif; }
body { background-color:#f8f9fa; color:#1a1a2e; min-height:100vh; }
nav { display:flex; justify-content:flex-end; align-items:center; padding:30px 50px; position:relative; }
nav .logo { position:absolute; left:50px; font-weight:bold; font-size:1.5rem; }
nav ul { list-style:none; display:flex; gap:40px; }
nav ul li a { text-decoration:none; color:#1a1a2e; font-weight:600; }
nav ul li a:hover { color:#fdbf2d; }
.main-content { max-width:600px; margin:50px auto; background:#fff; padding:30px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
.main-content h1 { text-align:center; margin-bottom:20px; }
.main-content p { margin-bottom:12px; font-weight:600; }
button.logout-btn { display:block; margin:20px auto 0; padding:10px 20px; background:#fdbf2d; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
button.logout-btn:hover { background:#e0ac1c; }
</style>
</head>
<body>

<nav>
  <div class="logo">Scan and Know</div>
  <ul>
    <li><a href="dashboard.html">Dashboard</a></li>
    <li><a href="profile.html">Profile</a></li>
    <li><a href="login.html">Logout</a></li>
  </ul>
</nav>

<div class="main-content" id="profile-content">
  <h1>Profile</h1>
  <p>Loading profile...</p>
</div>

<button class="logout-btn" onclick="logoutUser()">Logout</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// Firebase Init
const firebaseConfig = {
    apiKey: "AIzaSyBAG2Hr3l39IUWMZb9J6VoJmAgHqo1quLM",
    authDomain: "scanandknow-14d98.firebaseapp.com",
    projectId: "scanandknow-14d98",
    storageBucket: "scanandknow-14d98.appspot.com",
    messagingSenderId: "572867739400",
    appId: "1:572867739400:web:72fe1a6981418ca6fd76bd"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const profileContent = document.getElementById("profile-content");

// Auth check
auth.onAuthStateChanged(async (user) => {
    if (!user) window.location.href = "login.html";
    else loadProfile(user);
});

async function loadProfile(user) {
    try {
        const snap = await db.collection("teachers").doc(user.uid).get();
        if (!snap.exists) {
            profileContent.innerHTML = "<p>Profile data not found.</p>";
            return;
        }
        const data = snap.data();
        profileContent.innerHTML = `
            <h1>Profile</h1>
            <p><b>Name:</b> ${data.fullName || '---'}</p>
            <p><b>Email:</b> ${data.email || '---'}</p>
            <p><b>Contact:</b> ${data.contact || '---'}</p>
            <p><b>Department:</b> ${data.department || '---'}</p>
            <p><b>Position:</b> ${data.position || '---'}</p>
        `;
    } catch (err) {
        console.error(err);
        profileContent.innerHTML = "<p>Error loading profile.</p>";
    }
}

function logoutUser() {
    auth.signOut();
    window.location.href = "login.html";
}
</script>

</body>
</html>
